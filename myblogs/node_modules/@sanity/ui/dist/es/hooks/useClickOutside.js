import {useEffect, useState} from "react";
import {EMPTY_ARRAY} from "../constants";
function useClickOutside(listener, elementsArg = EMPTY_ARRAY, boundaryElement) {
  const [element, setElement] = useState(null);
  const elements = [element, ...elementsArg];
  useEffect(() => {
    if (!listener)
      return void 0;
    const handleWindowMouseDown = (evt) => {
      const target = evt.target;
      if (!target) {
        return;
      }
      if (boundaryElement && !boundaryElement.contains(target)) {
        return;
      }
      let clickInside = false;
      for (const el of elements) {
        if (el && el.contains(target)) {
          clickInside = true;
        }
      }
      if (!clickInside) {
        listener(evt);
      }
    };
    window.addEventListener("mousedown", handleWindowMouseDown);
    return () => {
      window.removeEventListener("mousedown", handleWindowMouseDown);
    };
  }, [boundaryElement, listener, ...elements]);
  return setElement;
}
export {
  useClickOutside
};
